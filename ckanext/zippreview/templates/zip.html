{% extends "dataviewer/base.html" %}

{%- block styles %}
  {% set type = "asset" if h.ckan_version() > "2.9" else "resource" %}
  {% include 'snippets/zippreview_' ~ type ~ '.html' %}
{% endblock %}

{% block page %}
  <div class="homepage layout-3">
    <a name="main_content" id="main_content" tabindex="-1"></a>
    <div role="main">
      <div class="container">
        <div class="row row2">
          <div class="span12 ">
            <!-- Snippet home/snippets/promoted.html start -->
            {% set tree = h.zip_tree(resource) %}
            {% if not tree %}
              Sorry, an error occurred and we are unable to display the files inside this archive.
            {% else %}
              <div class="module-content box">
                <ul class="ziptree">
                  {%- for item in tree recursive %}
                    <li><i class="fa icon fa-{{ item["icon"] }}"></i>  {{ item["title"] }}
                      {% if "file_size" in item %}
                        <small>({{item["file_size"]}})</small>
                      {% endif %}
                      {%- if item["children"] -%}
                        <ul class="subtree">{{ loop(item["children"]) }}</ul>
                      {%- endif %}
                    </li>
                  {%- endfor %}
                </ul>
                {% endif %}
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>

{% endblock %}
